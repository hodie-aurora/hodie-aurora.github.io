---
layout:     post   				# 使用的布局（不需要改）
title:      04-kubernetes资源控制器 		# 标题 
subtitle:   Kubernetes 基础系列			#副标题
date:       2025-01-14 				# 时间
author:     zhaohaiwen 				# 作者
header-img: img/post-bg-2025-01-07.jpg		#这篇文章标题背景图片
catalog: true 					# 是否归档
tags:						#标签
    - Kubernetes 基础系列
---
# 占位待补充

#### 四、资源控制器

1. 什么是 Pod？
2. 使用 Replication Controller 和 ReplicaSet
3. 使用 Deployment
4. 使用 StatefulSet
5. 使用 DaemonSet
6. 使用 Job 和 CronJob
7. Pod 模板和多容器 Pod

`Deployment` 和 `StatefulSet` 都是 Kubernetes 中用于管理应用程序的控制器，但它们适用于不同类型的应用，并提供了不同的功能。下面是它们之间的主要区别

### **Deployment**

1. **用途**：

   - **无状态应用**：Deployment 通常用于管理无状态（Stateless）应用，如Web服务器和API服务器。
2. **特性**：

   - **滚动更新和回滚**：提供滚动更新和回滚功能，能够逐步替换旧版Pod，不影响服务的连续性。
   - **扩展和缩减**：支持水平自动扩展和缩减，通过调整Pod的数量来适应负载变化。
   - **高可用性**：通过配置 `maxUnavailable`和 `maxSurge`，确保在更新过程中的高可用性。
3. **网络标识**：

   - **动态分配**：Pod的网络标识（如Pod名和IP地址）是动态分配的，不保证稳定。

### **StatefulSet**

1. **用途**：

   - **有状态应用**：StatefulSet 适用于管理有状态（Stateful）应用，如数据库、分布式文件系统和有状态服务。
2. **特性**：

   - **稳定的网络标识**：每个Pod有一个固定的网络标识（包括稳定的主机名和持久的存储卷），这些标识在Pod重启或重建时保持不变。
   - **有序部署和删除**：确保Pod按顺序创建、删除和更新，确保有状态服务的依赖性和数据一致性。
   - **持久化存储**：支持持久化存储卷，每个Pod可以有自己的存储卷，这些卷在Pod重启时不会丢失数据。

### **具体比较**

| 特性           | Deployment           | StatefulSet                        |
| -------------- | -------------------- | ---------------------------------- |
| 用途           | 无状态应用           | 有状态应用                         |
| 网络标识       | 动态分配             | 稳定的网络标识                     |
| 持久化存储     | 不适用于持久化存储   | 支持持久化存储                     |
| 有序部署和删除 | 不支持               | 支持                               |
| 滚动更新和回滚 | 支持                 | 支持（但需要注意状态一致性）       |
| 自动扩展       | 支持                 | 不推荐                             |
| 应用场景       | Web服务器、API服务器 | 数据库、分布式文件系统、有状态服务 |

### 举个例子

- **无状态应用（Deployment）**：一个运行Web服务器的Deployment，可以轻松地扩展和缩减Pod数量，以适应流量的变化；进行版本更新时，Deployment能逐步替换旧版本而不影响服务。
- **有状态应用（StatefulSet）**：一个运行数据库的StatefulSet，每个数据库实例都有自己独立的存储卷和稳定的网络标识，确保数据的持久性和一致性。

通过这张表和这些例子，希望能帮助你更好地理解Deployment和StatefulSet之间的区别。如果你还有其他问题或需要进一步讨论，欢迎继续提问。
